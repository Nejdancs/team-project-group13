{"version":3,"sources":["js/modal.js"],"names":["modalBtns","document","querySelectorAll","body","querySelector","lockPadding","unlock","timeout","length","index","modalBtn","addEventListener","e","modalName","getAttribute","modalOpen","getElementById","modalCloseBtn","el","modalClose","closest","curentModal","modalActive","bodyLock","classList","add","target","doUnlock","remove","bodyUnLock","lockPaddingValue","window","innerWidth","offsetWidth","style","paddingRight","setTimeout","which","Element","prototype","css","node","matches","parentElement","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector"],"mappings":";AAAA,MAAMA,EAAYC,SAASC,iBAAiB,kBACtCC,EAAOF,SAASG,cAAc,QAC9BC,EAAcJ,SAASC,iBAAiB,iBAE9C,IAAII,GAAS,EAEb,MAAMC,EAAU,IAEhB,GAAIP,EAAUQ,OAAS,EAChB,IAAA,IAAIC,EAAQ,EAAGA,EAAQT,EAAUQ,OAAQC,IAAS,CAC/CC,MAAAA,EAAWV,EAAUS,GAC3BC,EAASC,iBAAiB,QAAS,SAAUC,GACrCC,MAAAA,EAAYH,EAASI,aAAa,QAExCC,EADoBd,SAASe,eAAeH,MAMlD,MAAMI,EAAgBhB,SAASC,iBAAiB,mBAChD,GAAIe,EAAcT,OAAS,EACpB,IAAA,IAAIC,EAAQ,EAAGA,EAAQQ,EAAcT,OAAQC,IAAS,CACnDS,MAAAA,EAAKD,EAAcR,GACzBS,EAAGP,iBAAiB,QAAS,SAAUC,GACrCO,EAAWD,EAAGE,QAAQ,gBAK5B,SAASL,EAAUM,GACbA,GAAAA,GAAef,EAAQ,CACnBgB,MAAAA,EAAcrB,SAASG,cAAc,qBACvCkB,EACFH,EAAWG,GAAa,GAExBC,IAEFF,EAAYG,UAAUC,IAAI,WAC1BJ,EAAYV,iBAAiB,QAAS,SAAUC,GACzCA,EAAEc,OAAON,QAAQ,WACpBD,EAAWP,EAAEc,OAAON,QAAQ,iBAMpC,SAASD,EAAWG,EAAaK,GAAW,GACtCrB,IACFgB,EAAYE,UAAUI,OAAO,WACzBD,GACFE,KAKN,SAASN,IACDO,MAAAA,EAAmBC,OAAOC,WAAa/B,SAASG,cAAc,SAAS6B,YAAc,KAEvF5B,GAAAA,EAAYG,OAAS,EAClB,IAAA,IAAIC,EAAQ,EAAGA,EAAQJ,EAAYG,OAAQC,IAAS,CAC5CJ,EAAYI,GACpByB,MAAMC,aAAeL,EAI5B3B,EAAK+B,MAAMC,aAAeL,EAC1B3B,EAAKqB,UAAUC,IAAI,QAEnBnB,GAAS,EACT8B,WAAW,WACT9B,GAAS,GACRC,GAGL,SAASsB,IACPO,WAAW,WACL/B,GAAAA,EAAYG,OAAS,EAClB,IAAA,IAAIC,EAAQ,EAAGA,EAAQJ,EAAYG,OAAQC,IAAS,CAC5CJ,EAAYI,GACpByB,MAAMC,aAAe,MAG5BhC,EAAK+B,MAAMC,aAAe,MAC1BhC,EAAKqB,UAAUI,OAAO,SACrBrB,GAEHD,GAAS,EACT8B,WAAW,WACT9B,GAAS,GACRC,GAGLN,SAASU,iBAAiB,UAAW,SAAUC,GACzCA,GAAY,KAAZA,EAAEyB,MAAc,CAElBlB,EADoBlB,SAASG,cAAc,yBAOxCkC,QAAQC,UAAUnB,UAErBkB,QAAQC,UAAUnB,QAAU,SAAUoB,GAG7BC,IAFHA,IAAAA,EAAO,KAEJA,GAAM,CACPA,GAAAA,EAAKC,QAAQF,GAAM,OAAOC,EACzBA,EAAOA,EAAKE,cAEZ,OAAA,OAONL,QAAQC,UAAUG,UAErBJ,QAAQC,UAAUG,QAChBJ,QAAQC,UAAUK,iBAClBN,QAAQC,UAAUM,uBAClBP,QAAQC,UAAUO,oBAClBR,QAAQC,UAAUQ","file":"modal.f08791f8.js","sourceRoot":"../src","sourcesContent":["const modalBtns = document.querySelectorAll('.js-modal-open');\nconst body = document.querySelector('body');\nconst lockPadding = document.querySelectorAll('.lock-padding');\n\nlet unlock = true;\n\nconst timeout = 250;\n\nif (modalBtns.length > 0) {\n  for (let index = 0; index < modalBtns.length; index++) {\n    const modalBtn = modalBtns[index];\n    modalBtn.addEventListener('click', function (e) {\n      const modalName = modalBtn.getAttribute('data');\n      const curentModal = document.getElementById(modalName);\n      modalOpen(curentModal);\n    });\n  }\n}\n\nconst modalCloseBtn = document.querySelectorAll('.js-modal-close');\nif (modalCloseBtn.length > 0) {\n  for (let index = 0; index < modalCloseBtn.length; index++) {\n    const el = modalCloseBtn[index];\n    el.addEventListener('click', function (e) {\n      modalClose(el.closest('.backdrop'));\n    });\n  }\n}\n\nfunction modalOpen(curentModal) {\n  if (curentModal && unlock) {\n    const modalActive = document.querySelector('.backdrop.is-open');\n    if (modalActive) {\n      modalClose(modalActive, false);\n    } else {\n      bodyLock();\n    }\n    curentModal.classList.add('is-open');\n    curentModal.addEventListener('click', function (e) {\n      if (!e.target.closest('.modal')) {\n        modalClose(e.target.closest('.backdrop'));\n      }\n    });\n  }\n}\n\nfunction modalClose(modalActive, doUnlock = true) {\n  if (unlock) {\n    modalActive.classList.remove('is-open');\n    if (doUnlock) {\n      bodyUnLock();\n    }\n  }\n}\n\nfunction bodyLock() {\n  const lockPaddingValue = window.innerWidth - document.querySelector('.body').offsetWidth + 'px';\n\n  if (lockPadding.length > 0) {\n    for (let index = 0; index < lockPadding.length; index++) {\n      const el = lockPadding[index];\n      el.style.paddingRight = lockPaddingValue;\n    }\n  }\n\n  body.style.paddingRight = lockPaddingValue;\n  body.classList.add('lock');\n\n  unlock = false;\n  setTimeout(function () {\n    unlock = true;\n  }, timeout);\n}\n\nfunction bodyUnLock() {\n  setTimeout(function () {\n    if (lockPadding.length > 0) {\n      for (let index = 0; index < lockPadding.length; index++) {\n        const el = lockPadding[index];\n        el.style.paddingRight = '0px';\n      }\n    }\n    body.style.paddingRight = '0px';\n    body.classList.remove('lock');\n  }, timeout);\n\n  unlock = false;\n  setTimeout(function () {\n    unlock = true;\n  }, timeout);\n}\n\ndocument.addEventListener('keydown', function (e) {\n  if (e.which === 27) {\n    const modalActive = document.querySelector('.backdrop.is-open');\n    modalClose(modalActive);\n  }\n});\n\n(function () {\n  // проверяем поддержку\n  if (!Element.prototype.closest) {\n    // реализуем\n    Element.prototype.closest = function (css) {\n      var node = this;\n\n      while (node) {\n        if (node.matches(css)) return node;\n        else node = node.parentElement;\n      }\n      return null;\n    };\n  }\n})();\n\n(function () {\n  // проверяем поддержку\n  if (!Element.prototype.matches) {\n    // определяем свойство\n    Element.prototype.matches =\n      Element.prototype.matchesSelector ||\n      Element.prototype.webkitMatchesSelector ||\n      Element.prototype.mozMatchesSelector ||\n      Element.prototype.msMatchesSelector;\n  }\n})();\n"]}